# Как улучшить сигнал выхода

**Проблема:** без фиксированных TP/SL стратегии часто уходят в минус — сигнал выхода (смена фазы/тренда) приходит с лагом, прибыль отдаётся.

**Цель:** усилить сигнал выхода, чтобы выходить раньше (по ослаблению силы) и меньше зависеть от TP/SL.

---

## Идеи (план)

1. **Ранний выход по ослаблению**  
   Выходить не только при смене фазы/тренда, но и при падении `phase_score` ниже порога или при смене `momentum_direction` на bearish.

2. **Выход по младшему ТФ**  
   Выходить, когда младший таймфрейм показывает смену фазы/тренда, не дожидаясь дневного.

3. **Ведущие индикаторы**  
   RSI-дивергенция, объём (selling climax, exhaustion), пробой локального минимума — как предвестники смены фазы.

4. **Уменьшение лага детектора**  
   Меньший `lookback` для фазы/тренда — быстрее реакция, но больше шума.

Движок бэктеста с TP/SL — `src/utils/backtest_engine.py`; модуль TP/SL (ATR, трейлинг) — `src/utils/tp_sl.py`. При добавлении своих стратегий можно использовать эти модули.
