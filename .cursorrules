# Правила разработки торгового бота (best_bot_in_the_world)

## Контекст
- Мультитаймфреймовый бот для **Bybit** (pybit, REST V5). Пара по умолчанию — BTCUSDT (linear).
- Структура: **src/core**, **src/analysis** (market_phases, market_trend, multi_tf), **src/app**, **src/scripts**, **src/utils**; **strategies/**; **tests/** (unit, integration, backtest). Лаунчеры в корне только поднимают sys.path и вызывают код из src.
- Подробный контекст: **AGENT_CONTEXT.md**, **ДЛЯ_КОМАНДЫ.md**. Правила Cursor: **.cursor/rules/**.

## Безопасность
- Никогда не хардкодить API-ключи, токены, секреты. Только .env и os.getenv().
- .gitignore: .env, data/, logs/, секреты.

## Код
- Type hints для сигнатур. Имена: snake_case (функции/переменные), PascalCase (классы).
- Импорты между пакетами — относительные (from ..core import config).
- Ошибки API и сетевые сбои — ретраи с экспоненциальной задержкой; логировать с контекстом.

## Проверки
- После изменений запускать **python check_all.py** (при необходимости -v или --quick).
- Тесты добавлять в **tests/unit**, **tests/integration**, **tests/backtest**.

## Чего избегать
- Глобального изменяемого состояния для бизнес-логики.
- Игнорирования rate limit и ошибок API.
- Логирования балансов и ключей.
- Хардкода порогов и путей — выносить в конфиг/.env.
